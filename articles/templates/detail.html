{% extends "base.html" %}
{% load makemarkdown %}

{% block title %}
Detail Page
{% endblock %}

{% block body %}
<div class="row">
    <!-- Post Content Column -->
    <div class="col-lg-12">
        <!-- Title -->
        <h1 class="mt-4">{{ article.title }}</h1>
        <!-- Author -->
        <p class="lead">
            by <a href="{% url 'author-profile' article.author.username %}">{{ article.author.username }}</a>
        </p>
        <hr>
        <!-- Date/Time -->
        <p>Published on {{ article.published }}</p>
        <hr>
        <!-- Post Content -->
        {{ article.body|makemarkdown|safe }}

  </div>

</div>
<!-- /.row -->

    <button
        id="poppy"
        class="btn btn-outline-primary btn-sm"
        onclick="copyToClipboard('{{ request.build_absolute_uri }}')"
        data-toggle="popover"
        data-content="copied to clipboard!"
        data-animation="false"
        >
        &#128279; Share Link
    </button>

    <script>
        const copyToClipboard = str => {
            const el = document.createElement('textarea');
            el.value = str;
            el.setAttribute('readonly', '');
            el.style.position = 'absolute';
            el.style.left = '-9999px';
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            $("#poppy").popover("toggle");
        };
    </script>

    <div id="disqus_thread"></div>
    <script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

    var disqus_config = function () {
    this.page.url = "{{ request.build_absolute_uri }}";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "{{ article.slug }}"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://example-test-1.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
{% endblock %}